<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../d2l-button/d2l-button.html">
<link rel="import" href="../d2l-icons/d2l-icon.html">
<link rel="import" href="../d2l-icons/tier3-icons.html">
<link rel="import" href="../d2l-media-behavior/d2l-media-behavior.html">
<link rel="import" href="../d2l-seek-bar/d2l-seek-bar.html">
<link rel="import" href="../d2l-typography/d2l-typography.html">

<dom-module id="d2l-audio">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment d2l-typography">
      :host {
        display: inline-block;
        width: 400px;
      }

      #playPauseButton {
        width: 60px;
        height: 60px;
        border: 0;
        padding: 0;
      }

      #playPauseButton d2l-icon {
        --d2l-icon-height: 30px;
        --d2l-icon-width: 30px;
        color: var(--d2l-color-white);
      }

      #playPauseButton:focus {
        background-color: var(--d2l-color-celestine);
      }

      .seek-bar-container {
        position: relative;
        margin: 0 5px;
      }

      d2l-seek-bar {
        width: 100%;
      }

			d2l-icon[hidden] {
				display: none;
			}

      .info {
        position: absolute;
        color: var(--d2l-color-tungsten);
        top: 42px;
        left: 16px;
      }

      .info-placeholder {
        height: 10px;
      }
    </style>

    <div class="layout horizontal center d2l-typography">
      <button is="d2l-button" id="playPauseButton" primary on-tap="playPause">
        <d2l-icon hidden$="{{ isPlaying }}" icon="d2l-tier3:play-borderless"></d2l-icon>
        <d2l-icon hidden$="{{ !isPlaying }}" icon="d2l-tier3:pause-borderless"></d2l-icon>
      </button>

      <div class="flex seek-bar-container">
        <d2l-seek-bar
          value="[[ percentComplete ]]"
          immediate-value="{{ immediateValue }}"
          on-drag-start="_onSeekStart"
          on-drag-end="_onSeekEnd"></d2l-seek-bar>
        <div class="d2l-body-small info">{{ info }}</div>
      </div>

      <div class="time-container">
        {{ _getFormattedTime(immediateValue, duration) }}
      </div>
    </div>

    <div class="info-placeholder"></div>

    <audio id="media" preload="{{ _setPreload() }}">
      <source src="{{ src }}">
    </audio>
  </template>

  <script>
  Polymer({
    is: 'd2l-audio',

    behaviors: [
      D2LMediaBehavior,
    ],

    properties: {
      info: {
        type: String,
        value: 'Recorded Fevember 32nd at 26:72 RM',
      },
    }
  });
  </script>

</dom-module>

